<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Ember Starter Kit</title>
  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/style.css">
  <link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
</head>
<body>

    <script type="text/x-handlebars">
        <div class="navbar">
          <div class="navbar-inner">
            {{#link-to 'books' class='brand'}}BookViewer{{/link-to}}
            <ul class="nav">
              <li>{{#link-to 'books'}}Books{{/link-to}}</li>
              <li>{{#link-to 'authors'}}Authors{{/link-to}}</li>
            </ul>
          </div>
        </div>
        {{outlet}}
    </script>
    <script type="text/x-handlebars" id="genre">
        <div class="BookList">
            {{#each model}}
            <div class="Book">
                <div class="thumbnail">
                    {{#link-to 'book' id}}
                    <h3 class="name">{{name}}</h3>
                    {{/link-to}}
                    <p class="authors">
                        {{#each authors}}
                            {{#link-to 'author' id}}
                            <span class="author">
                                {{name}}
                            </span>
                            {{/link-to}}
                        {{/each}}
                    </p>
                </div>
            </div>
            {{/each}}
        </div>
        {{outlet}}
    </script>
    <script type="text/x-handlebars" id="books">
        <div class="BookList">
            {{#each model}}
            <div class="Book">
                <div class="thumbnail">
                    {{#link-to 'book' id}}
                    <h3 class="name">{{name}}</h3>
                    {{/link-to}}
                    <p class="authors">
                        {{#each authors}}
                            {{#link-to 'author' id}}
                            <span class="author">
                                {{name}}
                            </span>
                            {{/link-to}}
                        {{/each}}
                    </p>
                </div>
            </div>
            {{/each}}
        </div>
        {{outlet}}
    </script>
      <script type="text/x-handlebars" id="author">
        <div className='BookPage' >
            <div class="panel panel-default">
                <div class="panel-heading">
                    {{name}}
                </div>
                <div class="panel-body">
                    {{biography}}
                </div>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading">
                    Books
                </div>
                <div class="panel-body">
                    {{#each books}}
                    <div class="books">
                        <div class="Author">
                            <div class="thumbnail">
                                {{#link-to 'book' id}}
                                    <h3 class="name">{{name}}</h3>
                                {{/link-to}}
                            </div>
                        </div>
                    </div>
                    {{/each}}
                </div>
            </div>
        </div>
        {{outlet}}
    </script>
    <script type="text/x-handlebars" id="book">
        <div className='BookPage' >
            <div class="panel panel-default">
                <div class="panel-heading">
                    {{name}}
                </div>
                <div class="panel-body">
                    {{short}}
                </div>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading">
                    Authors
                </div>
                <div class="panel-body">
                    {{#each authors}}
                    <div class="books">
                        <div class="Author">
                            <div class="thumbnail">
                                {{#link-to 'author' id}}
                                    <h3 class="name">{{name}}</h3>
                                {{/link-to}}
                            </div>
                        </div>
                    </div>
                    {{/each}}
                </div>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading">
                    Genre
                </div>
                <div class="panel-body">
                    <div class="books">
                        <div class="Author">
                            <div class="thumbnail">
                                <h3 class="name">
                                    {{#link-to 'genre' genre}}
                                        {{genre}}
                                    {{/link-to}}
                                </h3>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {{outlet}}
    </script>
    <script type="text/x-handlebars" id="authors">
        <div class="AuthorsPage">
            {{#each model}}
                <div class="Author">
                    <div class="thumbnail">
                        <h3 class="name">{{name}}</h3>
                    </div>
                        <div class="btn-group">
                                <button type="button"
                                        class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                                  Dropdown
                                </button>
                                <ul class="dropdown-menu" role="menu">
                                    <li>
                                        {{#link-to 'author' id}}
                                            Details
                                        {{/link-to}}
                                    </li>
                                {{#each books}}
                                    <li>
                                        {{#link-to 'book' id}}{{name}}{{/link-to}}
                                    </li>
                                {{/each}}
                                </ul>
                        </div>
                </div>
            {{/each}}
        </div>
        {{outlet}}
    </script>

    <script src="js/libs/jquery-v1.11.1.js"></script>
    <script type="text/javascript">
        $('body').on('click','.Author',function(event) {
            var $button = $('.btn-group', this);
            if (!$button.hasClass('open')) {
                $button.addClass('open');
            } else {
                $button.removeClass('open');
            }
        });
    </script>
    <script src="js/libs/handlebars-v1.3.0.js"></script>
    <script src="js/libs/ember-v1.6.1.js"></script>

    <script src="js/app.js"></script>
</body>
</html>
